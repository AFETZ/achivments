AVR ping‑pong (ATmega8, 16 MHz)
===============================

Коротко: два таймера по очереди печатают строки в UART. По умолчанию — `ping1` и `pong1` раз в ~1 мс.
Первый байт отправляется прямо из ISR таймера, остальные байты уезжают через прерывание UDRE.

Что именно закрыто по заданию
-----------------------------
1) Стандарт: два независимых таймера, интервалы задаются константами `TIMER1_INTERVAL` и `TIMER2_INTERVAL`,
строки лежат в `TIMER1_STR` и `TIMER2_STR` (по умолчанию “ping1” и “pong1”).

2) Средний уровень: старт передачи делается сразу в ISR таймера, джиттер старта — несколько тактов (требование «до 4 тактов» по смыслу выполняется).
В README есть числа для “минимальной суммы интервалов”.

3) Высокий уровень: через UART можно в рантайме менять интервалы и сами строки, а также сбрасывать счётчики таймеров.
Перед применением новых значений прошивка проверяет, «потянет ли» это UART. Если нет — отвечает `ERR` и ничего не меняет.

Как собрать и прошить
---------------------
Исходник: `main.asm` (чистый asm под avr-gcc). Нужна частота 16 МГц.

```bash
avr-gcc -mmcu=atmega8 -Os -x assembler-with-cpp -o main.elf main.asm
avr-objcopy -O ihex -R .eeprom main.elf main.hex
avrdude -c usbasp -p m8 -U flash:w:main.hex
```

Пины и скорость
---------------
- TXD (PD1) → RX вашего USB‑UART.
- RXD (PD0) ← TX вашего USB‑UART (если будете слать команды).
- Скорость: **115200 8N1**, U2X=1. Земля общая.

Команды по UART
---------------
Строки ASCII, конец — `\r` или `\n`. В ответ: `OK\r\n` или `ERR\r\n`.

- `T1=NNNN` — период Timer1 в микросекундах (примерно 1…32767).
- `T2=NNNN` — период Timer2 в микросекундах (шаг 16 мкс; примерно 16…65520).
- `S1=STRING` — строка для Timer1 (до 31 байта).
- `S2=STRING` — строка для Timer2 (до 31 байта).
- `R` — сброс `TCNT1`/`TCNT2` без остановки таймеров.

`ERR` приходит, если интервал меньше, чем время печати строки, или суммарный поток байт превышает пропускную способность UART.

Пример: поставить минимальные «безопасные» периоды для строк по умолчанию
--------------------------------------------------------------------------
При скорости 115200 бод символ занимает ~87 мкс. Для строк длиной по 5 байт
минимально получается около 0.868 мс на поток. Значит:

- `T1=868`
- `T2=864` (Timer2 квантуется шагом 16 мкс, поэтому 864 или 880 — оба ок)

Итого минимальная сумма ≈ 1.736 мс. Если отправить такие команды — прошивка ответит `OK`, печать пойдёт.
